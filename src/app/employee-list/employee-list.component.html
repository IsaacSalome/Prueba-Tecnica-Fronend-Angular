<div class="container mx-auto p-4">
    <h1 class="text-center mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl">
      <span class="text-center text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400"> Gestión de Empleados</span>
    </h1>


<br/>  
  <!-- Sección para listar empleados -->
  <div>
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-semibold">Lista de Empleados</h2>
      <div class="relative group">
        <button
          class="bg-green-500 text-white px-4 py-2 rounded flex items-center gap-2 transition-shadow hover:shadow-lg"
          (click)="openCreateModal()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            viewBox="0 0 24 24"
          >
            <g
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            >
              <path
                d="M7 5.667A2.667 2.667 0 0 1 9.667 3h8.666A2.667 2.667 0 0 1 21 5.667v8.666A2.667 2.667 0 0 1 18.333 17H9.667A2.667 2.667 0 0 1 7 14.333z"
              />
              <path
                d="M4.012 7.26A2 2 0 0 0 3 8.997v10c0 1.1.9 2 2 2h10c.75 0 1.158-.385 1.5-1M11 10h6m-3-3v6"
              />
            </g>
          </svg>
          Crear
        </button>
        <!-- Tooltip personalizado -->
        <span
          class="absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1 text-sm text-white bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"
        >
          Crear
        </span>
      </div>
    </div>

    <!-- Alerta de creación exitosa -->
    <div
      *ngIf="isCreateSuccess"
      class="flex items-center gap-4 p-4 mb-4 bg-green-100 border-l-4 border-green-500 text-green-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Empleado creado exitosamente</strong>
        <p class="text-sm">El empleado ha sido creado correctamente.</p>
      </div>
      <button
        (click)="closeCreateSuccessAlert()"
        class="text-green-800 hover:text-green-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Alerta de actualización exitosa -->
    <div
      *ngIf="isUpdateSuccess"
      class="flex items-center gap-4 p-4 mb-4 bg-green-100 border-l-4 border-green-500 text-green-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 4v16m8-8H4"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Empleado actualizado exitosamente</strong>
        <p class="text-sm">El empleado ha sido actualizado correctamente.</p>
      </div>
      <button
        (click)="closeUpdateSuccessAlert()"
        class="text-yellow-800 hover:text-yellow-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Alerta de eliminación exitosa -->
    <div
      *ngIf="isDeleteSuccess"
      class="flex items-center gap-4 p-4 mb-4 bg-red-100 border-l-4 border-red-500 text-red-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Empleado eliminado exitosamente</strong>
        <p class="text-sm">El empleado ha sido eliminado correctamente.</p>
      </div>
      <button
        (click)="closeDeleteSuccessAlert()"
        class="text-red-800 hover:text-red-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Alerta de error -->
    <div
      *ngIf="isError"
      class="flex items-center gap-4 p-4 mb-4 bg-gray-100 border-l-4 border-gray-500 text-gray-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M18 6L6 18M6 6l12 12"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Ocurrió un error</strong>
        <p class="text-sm">
          Hubo un problema al realizar la operación. Por favor, intente de
          nuevo.
        </p>
      </div>
      <button
        (click)="closeErrorAlert()"
        class="text-gray-800 hover:text-gray-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <table class="min-w-full table-auto border-collapse border border-gray-200">
      <thead>
        <tr class="bg-gray-100">
          <th class="px-4 py-2 text-left">Número de Empleado</th>
          <th class="px-4 py-2 text-left">Nombre</th>
          <th class="px-4 py-2 text-left">Apellido</th>
          <th class="px-4 py-2 text-left">Compañia</th>
          <th class="px-4 py-2 text-left">Pais</th>
          <th class="px-4 py-2 text-left">Estado</th>
          <th class="px-4 py-2 text-left">Curp</th>
          <th class="px-4 py-2 text-left">RFC</th>
          <th class="px-4 py-2 text-left">Género</th>

          <th class="px-4 py-2 text-left">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let employee of employees">
          <td class="border px-4 py-2">{{ employee.employeeNumber }}</td>
          <td class="border px-4 py-2">{{ employee.name }}</td>
          <td class="border px-4 py-2">{{ employee.lastName }}</td>
          <td class="border px-4 py-2">{{ employee.company }}</td>
          <td class="border px-4 py-2">{{ employee.country }}</td>
          <td class="border px-4 py-2">{{ employee.state }}</td>
          <td class="border px-4 py-2">{{ employee.curp }}</td>
          <td class="border px-4 py-2">{{ employee.rfc }}</td>
          <td class="border px-4 py-2">{{ employee.gender }}</td>

          <td class="border px-4 py-2">
            <div class="flex m-2">
              <div class="relative group">
                <button
                  class="text-base rounded-r-none hover:shadow-lg hover:scale-110 focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer hover:bg-gray-500 text-white bg-gray-500 text-white border duration-200 ease-in-out border-teal-600 transition"
                  (click)="openDetailModal(employee)"
                >
                  <div class="flex leading-5">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="1em"
                      height="1em"
                      viewBox="0 0 24 24"
                    >
                      <g
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                      >
                        <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0-4 0" />
                        <path d="M21 12q-3.6 6-9 6t-9-6q3.6-6 9-6t9 6" />
                      </g>
                    </svg>
                  </div>
                </button>
                <!-- Tooltip personalizado -->
                <span class="absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1 text-sm text-white bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity">
                  Ver
                </span>
              </div>
              
              <div class="relative group">
                <button
                  class="text-base rounded-l-none rounded-r-none border-l-0 border-r-0 hover:shadow-lg hover:scale-110 focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer hover:bg-teal-700 hover:text-teal-100 bg-blue-500 text-white border duration-200 ease-in-out border-teal-600 transition"
                  (click)="openUpdateModal(employee)"
                >
                  <div class="flex leading-5">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="1em"
                      height="1em"
                      viewBox="0 0 24 24"
                    >
                      <g
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                      >
                        <path d="M7 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-1" />
                        <path d="M20.385 6.585a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3zM16 5l3 3" />
                      </g>
                    </svg>
                  </div>
                </button>
                <!-- Tooltip personalizado -->
                <span class="absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1 text-sm text-white bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity">
                  Actualizar 
                </span>
              </div>
              

              <div class="relative group">
                <button
                  class="text-base rounded-l-none hover:shadow-lg focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer hover:scale-110 bg-red-500 text-white border duration-200 ease-in-out border-teal-600 transition"
                  (click)="openDeleteModal(employee)"
                >
                  <div class="flex leading-5">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="1em"
                      height="1em"
                      viewBox="0 0 24 24"
                    >
                      <path
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 7h16m-10 4v6m4-6v6M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"
                      />
                    </svg>
                  </div>
                </button>
                <!-- Tooltip personalizado -->
                <span
                  class="absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1 text-sm text-white bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"
                >
                  Eliminar
                </span>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal de Actualización de Empleado -->
  <div
    *ngIf="isUpdateModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">Actualizar Empleado</h2>
      <form
        (ngSubmit)="
          updateEmployee(updatedEmployee.employeeNumber, updatedEmployee)
        "
      >
        <input
          [(ngModel)]="updatedEmployee.employeeNumber"
          name="employeeNumber"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Nombre"
        />

        <input
          [(ngModel)]="updatedEmployee.name"
          name="name"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Nombre"
        />
        <input
          [(ngModel)]="updatedEmployee.lastName"
          name="lastName"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Apellido"
        />
        <input
          [(ngModel)]="updatedEmployee.company"
          name="company"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Compañía"
        />
        <select
          [(ngModel)]="updatedEmployee.gender"
          name="gender"
          class="w-full p-2 border border-gray-300 rounded mb-4"
        >
          <option
            *ngFor="let gender of Gender | keyvalue"
            [value]="gender.value"
          >
            {{ gender.value }}
          </option>
        </select>
        <input
          [(ngModel)]="updatedEmployee.country"
          name="country"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="País"
        />
        <input
          [(ngModel)]="updatedEmployee.state"
          name="state"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Estado"
        />
        <input
          [(ngModel)]="updatedEmployee.curp"
          name="curp"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="CURP"
        />
        <input
          [(ngModel)]="updatedEmployee.rfc"
          name="rfc"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="RFC"
        />
        <div class="flex justify-end">
          <button
            type="submit"
            class="bg-blue-500 text-white px-4 py-2 rounded"
          >
            Actualizar
          </button>
          <button
            type="button"
            (click)="closeUpdateModal()"
            class="bg-gray-300 text-black px-4 py-2 rounded ml-2"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Confirmación de Eliminación -->
  <div
    *ngIf="isDeleteModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">
        ¿Estás seguro de eliminar este empleado?
      </h2>
      <p>
        <strong>Nombre:</strong> {{ selectedEmployee?.name }}
        {{ selectedEmployee?.lastName }}
      </p>
      <p><strong>Compañía:</strong> {{ selectedEmployee?.company }}</p>
      <p><strong>País:</strong> {{ selectedEmployee?.country }}</p>
      <p><strong>Estado:</strong> {{ selectedEmployee?.state }}</p>
      <div class="flex justify-end mt-4">
        <button
          (click)="deleteEmployee(selectedEmployee.employeeNumber)"
          class="bg-red-500 text-white px-4 py-2 rounded mr-2"
        >
          Eliminar
        </button>
        <button
          type="button"
          (click)="closeDeleteModal()"
          class="bg-gray-300 text-black px-4 py-2 rounded"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>
  <!-- Modal para Crear Nuevo Empleado -->
  <div
    *ngIf="isCreateModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">Crear Nuevo Empleado</h2>
      <form (ngSubmit)="createEmployee()">
        <input
          [(ngModel)]="newEmployee.name"
          name="name"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Nombre"
        />
        <input
          [(ngModel)]="newEmployee.lastName"
          name="lastName"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Apellido"
        />
        <input
          [(ngModel)]="newEmployee.company"
          name="company"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Compañía"
        />
        <select
          [(ngModel)]="newEmployee.gender"
          name="gender"
          class="w-full p-2 border border-gray-300 rounded mb-4"
        >
          <option
            *ngFor="let gender of Gender | keyvalue"
            [value]="gender.value"
          >
            {{ gender.value }}
          </option>
        </select>
        <input
          [(ngModel)]="newEmployee.country"
          name="country"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="País"
        />
        <input
          [(ngModel)]="newEmployee.state"
          name="state"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Estado"
        />
        <input
          [(ngModel)]="newEmployee.curp"
          name="curp"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="CURP"
        />
        <input
          [(ngModel)]="newEmployee.rfc"
          name="rfc"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="RFC"
        />
        <div class="flex justify-end">
          <button
            type="submit"
            class="bg-blue-500 text-white px-4 py-2 rounded"
          >
            Crear
          </button>
          <button
            type="button"
            (click)="closeCreateModal()"
            class="bg-gray-300 text-black px-4 py-2 rounded ml-2"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Visualización de Detalles -->
  <div
    *ngIf="isDetailModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">Detalles del Empleado</h2>

      <!-- Información de Empleado -->
      <div class="mb-4">
        <label class="block text-gray-700">Número de Empleado:</label>
        <p class="text-gray-900">{{ selectedEmployee?.employeeNumber }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">Nombre:</label>
        <p class="text-gray-900">{{ selectedEmployee?.name }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">Apellido:</label>
        <p class="text-gray-900">{{ selectedEmployee?.lastName }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">Compañía:</label>
        <p class="text-gray-900">{{ selectedEmployee?.company }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">Género:</label>
        <p class="text-gray-900">{{ selectedEmployee?.gender }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">País:</label>
        <p class="text-gray-900">{{ selectedEmployee?.country }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">Estado:</label>
        <p class="text-gray-900">{{ selectedEmployee?.state }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">CURP:</label>
        <p class="text-gray-900">{{ selectedEmployee?.curp }}</p>
      </div>

      <div class="mb-4">
        <label class="block text-gray-700">RFC:</label>
        <p class="text-gray-900">{{ selectedEmployee?.rfc }}</p>
      </div>

      <!-- Botón para cerrar el modal -->
      <div class="flex justify-end">
        <button
          (click)="closeDetailModal()"
          class="bg-gray-300 text-black px-4 py-2 rounded ml-2"
        >
          Cerrar
        </button>
      </div>
    </div>
  </div>
</div>
