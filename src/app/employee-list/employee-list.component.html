<div class="container mx-auto p-4">
  <h1 class="text-3xl font-semibold mb-4">Gestión de Empleados</h1>

  <!-- Sección para listar empleados -->
  <div>
    <h2 class="text-2xl font-semibold mb-2">Lista de Empleados</h2>
    <button class="btn btn-primary mb-4" (click)="loadAllEmployees()">
      Cargar Todos los Empleados
    </button>
    <button
      class="bg-blue-500 text-white px-4 py-2 rounded"
      (click)="openCreateModal()"
    >
      Crear Nuevo Empleado
    </button>

    <!-- Alerta de creación exitosa -->
    <div
      *ngIf="isCreateSuccess"
      class="flex items-center gap-4 p-4 mb-4 bg-green-100 border-l-4 border-green-500 text-green-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Empleado creado exitosamente</strong>
        <p class="text-sm">El empleado ha sido creado correctamente.</p>
      </div>
      <button
        (click)="closeCreateSuccessAlert()"
        class="text-green-800 hover:text-green-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Alerta de actualización exitosa -->
    <div
      *ngIf="isUpdateSuccess"
      class="flex items-center gap-4 p-4 mb-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 4v16m8-8H4"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Empleado actualizado exitosamente</strong>
        <p class="text-sm">El empleado ha sido actualizado correctamente.</p>
      </div>
      <button
        (click)="closeUpdateSuccessAlert()"
        class="text-yellow-800 hover:text-yellow-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Alerta de eliminación exitosa -->
    <div
      *ngIf="isDeleteSuccess"
      class="flex items-center gap-4 p-4 mb-4 bg-red-100 border-l-4 border-red-500 text-red-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Empleado eliminado exitosamente</strong>
        <p class="text-sm">El empleado ha sido eliminado correctamente.</p>
      </div>
      <button
        (click)="closeDeleteSuccessAlert()"
        class="text-red-800 hover:text-red-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Alerta de error -->
    <div
      *ngIf="isError"
      class="flex items-center gap-4 p-4 mb-4 bg-gray-100 border-l-4 border-gray-500 text-gray-800 rounded-xl"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M18 6L6 18M6 6l12 12"
        />
      </svg>
      <div class="flex-1">
        <strong class="font-medium">Ocurrió un error</strong>
        <p class="text-sm">
          Hubo un problema al realizar la operación. Por favor, intente de
          nuevo.
        </p>
      </div>
      <button
        (click)="closeErrorAlert()"
        class="text-gray-800 hover:text-gray-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <table class="min-w-full table-auto border-collapse border border-gray-200">
      <thead>
        <tr class="bg-gray-100">
          <th class="px-4 py-2 text-left">Número de Empleado</th>
          <th class="px-4 py-2 text-left">Nombre</th>
          <th class="px-4 py-2 text-left">Apellido</th>
          <th class="px-4 py-2 text-left">Compañia</th>
          <th class="px-4 py-2 text-left">Pais</th>
          <th class="px-4 py-2 text-left">Estado</th>
          <th class="px-4 py-2 text-left">Curp</th>
          <th class="px-4 py-2 text-left">RFC</th>
          <th class="px-4 py-2 text-left">Género</th>

          <th class="px-4 py-2 text-left">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let employee of employees">
          <td class="border px-4 py-2">{{ employee.employeeNumber }}</td>
          <td class="border px-4 py-2">{{ employee.name }}</td>
          <td class="border px-4 py-2">{{ employee.lastName }}</td>
          <td class="border px-4 py-2">{{ employee.company }}</td>
          <td class="border px-4 py-2">{{ employee.country }}</td>
          <td class="border px-4 py-2">{{ employee.state }}</td>
          <td class="border px-4 py-2">{{ employee.curp }}</td>
          <td class="border px-4 py-2">{{ employee.rfc }}</td>
          <td class="border px-4 py-2">{{ employee.gender }}</td>

          <td class="border px-4 py-2">
            <button  class="bg-blue-500 text-white px-4 py-2 rounded ml-2" 
            (click)="openDetailModal(employee)" >

              Detalles
            </button>
            <button
              class="bg-yellow-500 text-white px-4 py-2 rounded ml-2"
              (click)="openUpdateModal(employee)"
            >
              Actualizar
            </button>
            <button
              class="bg-red-500 text-white px-4 py-2 rounded ml-2"
              (click)="openDeleteModal(employee)"
            >
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal de Actualización de Empleado -->
  <div
    *ngIf="isUpdateModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">Actualizar Empleado</h2>
      <form
        (ngSubmit)="
          updateEmployee(updatedEmployee.employeeNumber, updatedEmployee)
        "
      >
        <input
          [(ngModel)]="updatedEmployee.employeeNumber"
          name="employeeNumber"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Nombre"
        />

        <input
          [(ngModel)]="updatedEmployee.name"
          name="name"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Nombre"
        />
        <input
          [(ngModel)]="updatedEmployee.lastName"
          name="lastName"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Apellido"
        />
        <input
          [(ngModel)]="updatedEmployee.company"
          name="company"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Compañía"
        />
        <select
          [(ngModel)]="updatedEmployee.gender"
          name="gender"
          class="w-full p-2 border border-gray-300 rounded mb-4"
        >
          <option
            *ngFor="let gender of Gender | keyvalue"
            [value]="gender.value"
          >
            {{ gender.value }}
          </option>
        </select>
        <input
          [(ngModel)]="updatedEmployee.country"
          name="country"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="País"
        />
        <input
          [(ngModel)]="updatedEmployee.state"
          name="state"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Estado"
        />
        <input
          [(ngModel)]="updatedEmployee.curp"
          name="curp"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="CURP"
        />
        <input
          [(ngModel)]="updatedEmployee.rfc"
          name="rfc"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="RFC"
        />
        <div class="flex justify-end">
          <button
            type="submit"
            class="bg-blue-500 text-white px-4 py-2 rounded"
          >
            Actualizar
          </button>
          <button
            type="button"
            (click)="closeUpdateModal()"
            class="bg-gray-300 text-black px-4 py-2 rounded ml-2"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Confirmación de Eliminación -->
  <div
    *ngIf="isDeleteModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">
        ¿Estás seguro de eliminar este empleado?
      </h2>
      <p>
        <strong>Nombre:</strong> {{ selectedEmployee?.name }}
        {{ selectedEmployee?.lastName }}
      </p>
      <p><strong>Compañía:</strong> {{ selectedEmployee?.company }}</p>
      <p><strong>País:</strong> {{ selectedEmployee?.country }}</p>
      <p><strong>Estado:</strong> {{ selectedEmployee?.state }}</p>
      <div class="flex justify-end mt-4">
        <button
          (click)="deleteEmployee(selectedEmployee.employeeNumber)"
          class="bg-red-500 text-white px-4 py-2 rounded mr-2"
        >
          Eliminar
        </button>
        <button
          type="button"
          (click)="closeDeleteModal()"
          class="bg-gray-300 text-black px-4 py-2 rounded"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>
  <!-- Modal para Crear Nuevo Empleado -->
  <div
    *ngIf="isCreateModalOpen"
    class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"
  >
    <div class="bg-white p-6 rounded-lg w-96">
      <h2 class="text-xl font-semibold mb-4">Crear Nuevo Empleado</h2>
      <form (ngSubmit)="createEmployee()">
        <input
          [(ngModel)]="newEmployee.name"
          name="name"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Nombre"
        />
        <input
          [(ngModel)]="newEmployee.lastName"
          name="lastName"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Apellido"
        />
        <input
          [(ngModel)]="newEmployee.company"
          name="company"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Compañía"
        />
        <select
          [(ngModel)]="newEmployee.gender"
          name="gender"
          class="w-full p-2 border border-gray-300 rounded mb-4"
        >
          <option
            *ngFor="let gender of Gender | keyvalue"
            [value]="gender.value"
          >
            {{ gender.value }}
          </option>
        </select>
        <input
          [(ngModel)]="newEmployee.country"
          name="country"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="País"
        />
        <input
          [(ngModel)]="newEmployee.state"
          name="state"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="Estado"
        />
        <input
          [(ngModel)]="newEmployee.curp"
          name="curp"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="CURP"
        />
        <input
          [(ngModel)]="newEmployee.rfc"
          name="rfc"
          class="w-full p-2 border border-gray-300 rounded mb-4"
          placeholder="RFC"
        />
        <div class="flex justify-end">
          <button
            type="submit"
            class="bg-blue-500 text-white px-4 py-2 rounded"
          >
            Crear
          </button>
          <button
            type="button"
            (click)="closeCreateModal()"
            class="bg-gray-300 text-black px-4 py-2 rounded ml-2"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

<!-- Modal de Visualización de Detalles -->
<div *ngIf="isDetailModalOpen" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50">
  <div class="bg-white p-6 rounded-lg w-96">
    <h2 class="text-xl font-semibold mb-4">Detalles del Empleado</h2>
    
    <!-- Información de Empleado -->
    <div class="mb-4">
      <label class="block text-gray-700">Número de Empleado:</label>
      <p class="text-gray-900">{{ selectedEmployee?.employeeNumber }}</p>
    </div>
    
    <div class="mb-4">
      <label class="block text-gray-700">Nombre:</label>
      <p class="text-gray-900">{{ selectedEmployee?.name }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Apellido:</label>
      <p class="text-gray-900">{{ selectedEmployee?.lastName }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Compañía:</label>
      <p class="text-gray-900">{{ selectedEmployee?.company }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Género:</label>
      <p class="text-gray-900">{{ selectedEmployee?.gender }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">País:</label>
      <p class="text-gray-900">{{ selectedEmployee?.country }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Estado:</label>
      <p class="text-gray-900">{{ selectedEmployee?.state }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">CURP:</label>
      <p class="text-gray-900">{{ selectedEmployee?.curp }}</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">RFC:</label>
      <p class="text-gray-900">{{ selectedEmployee?.rfc }}</p>
    </div>

    <!-- Botón para cerrar el modal -->
    <div class="flex justify-end">
      <button (click)="closeDetailModal()" class="bg-gray-300 text-black px-4 py-2 rounded ml-2">
        Cerrar
      </button>
    </div>
  </div>
</div>


</div>
